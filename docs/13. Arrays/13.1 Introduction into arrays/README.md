# Введение в массивы

Массив — коллекция данных **ОДНОГО** типа

- Не так часто используются в БД
- Например: 10 чисел типа int, 7 строк типа varchar, 34 числа типа real и т.д. 
  (примеры одномерных массивов)
- Столбцы и переменные могут объявляться как массив
- Массивы могут быть многомерными
- Двумерный массив:

| 2 | 3 | 6 |
|---|---|---|
| 4 | 1 | 3 |
| 5 | 2 | 7 |

- Трех и более мерные на практике не встречаются (кубы обрабатываются не массивами)

SQL-стандарт
```sql
temp int ARRAY
temp int ARRAY[4]
```

Postgres
```sql
temp int[]
temp int[8]
```

Явно указанные размеры ни на что не влияют!
Они чисто для документации.
В реальности можно засунуть больше данных

## Инициализация массивов

- `'{"a", "b", "c"}'`
- `'{1, 2, 3}'`
- `'{ {1, 2, 3}, {1, 2, 3}, {1, 2, 3} }'`
- `ARRAY['a', 'b', 'c']`
- `ARRAY[1, 2, 3]`
- `ARRAY[[1, 2, 3], [1, 2, 3], [1, 2, 3]]`

## Обращение к массивам

- `tmp[index]` - взятие элемента по индексу (от 1)
- Слайсинг (срезы)
  - `tmp[1:3]` с 1 по 3 элемент
  - `tmp[:4]` с 1 по 4 элемент
  - `tmp[2:]` с 2 по последний элемент
- `array_dims(arr_name)` - возвращает размерность массива (одномерный, двумерный)
- `array_length(arr_name, dim)` - возвращает длину массива

Массивы — это не множества; необходимость поиска определённых элементов в массиве может быть
признаком неудачно сконструированной базы данных. Возможно, вместо массива лучше использовать
отдельную таблицу, строки которой будут содержать данные элементов массива. Это может быть
лучше и для поиска, и для работы с большим количеством элементов.

